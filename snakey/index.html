<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake gameüêç</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        
        #gameCanvas {
            border: 2px solid #333;
            display: block;
            margin: 20px auto;
        }
        /* ...existing CSS... */

        .score-container {
            font-size: 20px;
            font-weight: bold;
            margin: 10px 0;
            text-align: center;
        }

        .score {
            color: #333;
            background-color: #f0f0f0;
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    
    <h1>Welcome to Snakeyüêç</h1>
    <p>This is a simplex     snake game by <a href="https://github.com/shohgames/snake">@Shohgames</a></p>
    <p>Have fun playing!</p>
    <!--Damn writing html feels so nostalgic-->

    <div class="score-container">Score: <span class="score" id="score">0</span></div>
   <canvas id="gameCanvas" width="300" height="300">&lt;canvas>
    
    <script>
        /**const**/
        const canvas_border_color = "blue";
        const canvas_background_color = "white";
        const snake_color = "green";
        const snake_border_color = "black";


        /**so the snakes head is moving 10 points in the x, and not it y
         *hence its a horizontally placed snake**/
        
        let snake = [
        {x: 150, y: 150},
        {x: 140, y: 150},
        {x: 130, y: 150},
        {x: 120, y: 150},
        {x: 110, y: 150},
        ];

        /**velocity**/
        let dx = 10;
        let dy = 0;
        /**score&food**/
        let score = 0;
        let foodX;
        let foodY;


        var gameCanvas = document.getElementById("gameCanvas")
        var ctx = gameCanvas.getContext("2d");
        ctx.strokeStyle = canvas_border_color
        ctx.fillStyle = canvas_background_color

        ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
        ctx.strokeRect(0,0, gameCanvas.width, gameCanvas.height);
        

        drawSnake();
        function drawSnake() {
            snake.forEach(drawSnakePart)
        }
        function drawSnakePart(snakePart) {
            ctx.fillStyle = snake_color;
            ctx.strokeStyle = snake_border_color;
            ctx.fillRect(snakePart.x, snakePart.y, 10,10);
            ctx.strokeRect(snakePart.x, snakePart.y, 10,10);
        }
        /**the color is not good, gotta change it to something more 
         * pleasant to the eye. but until then , it should be fine. **/

        function moveSnake() {
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            snake.unshift(head);
            const didEatFood = snake[0].x === foodX && snake[0].y === foodY;
            if (didEatFood) {
                score += 10;
                document.getElementById('score').innerHTML = score;
                createFood();
            } else{
            snake.pop();
            }
        }

      
        
       /*  // Clear the canvas before redrawing so it can show the snake moving
        ctx.fillStyle = canvas_background_color;
        ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
        ctx.strokeStyle = canvas_border_color;
        ctx.strokeRect(0, 0, gameCanvas.width, gameCanvas.height);
         */

        function clearCanvas() {
        ctx.fillStyle = canvas_background_color;
        ctx.strokeStyle = canvas_border_color;
        ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
        ctx.strokeRect(0, 0, gameCanvas.width, gameCanvas.height);
        }
        
       

        createFood();
        function maintickmove() {
        if (didGameEnd()) return;
        setTimeout(function onTick() {
        clearCanvas();
        drawFood();
        moveSnake();
        drawSnake();
        // Call main again
        maintickmove();
        }, 100)
        }

        document.addEventListener("keydown", changeDirection)

        // Start the game loop
        maintickmove();


        function changeDirection(event) {
            const left = 37;
            const right = 39;
            const up = 38;
            const down = 40;

            const keyPressed = event.keyCode;
            const moveUp = dy === -10;
            const moveDown = dy === 10;
            const moveLeft = dx === -10;
            const moveRight = dx === 10;

            if (keyPressed === left && !moveRight) {
                dx = -10;
                dy = 0;
                //console.log("dx:", dx, "dy:", dy);
            }
            if  (keyPressed === right && !moveLeft) {
                dx = 10;
                dy = 0;
            }
            if (keyPressed === up && !moveDown) {
                dx = 0;
                dy = -10;
            }
            if (keyPressed === down && !moveUp) {
                dx = 0;
                dy = 10;
            }
            
            

        }
        function rTen(min,max) {
                return Math.round((Math.random() * (max-min)+min)/10)*10;
            }

            function createFood() {
                foodX = rTen(0, gameCanvas.width-10);
                foodY = rTen(0, gameCanvas.height-10);
                snake.forEach(function FoodOnSnake(part) {
                    const FoodIsOnSnake = part.x == foodX && part.y == foodY
                    if (FoodIsOnSnake)
                        createFood();
                });
            
            }
        function drawFood() {
            ctx.fillStyle = 'red'
            ctx.strokeStyle = 'darkred'
            ctx.fillRect(foodX,foodY,10,10)
            ctx.strokeRect(foodX,foodY,10,10) 
        }

        function didGameEnd() {
            for (let i = 4; i < snake.length; i++) {
                const didCollide = snake[i].x === snake[0].x &&
                snake[i].y === snake[0].y
                if (didCollide) return true
            }
            const hitLeftWall = snake[0].x < 0;
            const hitRightWall = snake[0].x > gameCanvas.width - 10;
            const hitToptWall = snake[0].y < 0;
            const hitBottomWall = snake[0].y > gameCanvas.height - 10;
            return hitLeftWall || 
                   hitRightWall || 
                   hitToptWall ||
                   hitBottomWall
        }

    </script>
    
</body>
</html>